# Утилита для работы с Dropbox

## Для запуска утилиты требуется:
- python 3.8 (возможно скрипт будет работать и на других версиях python но таких тестов не было)

При работе используются стандартные библиотеки: sys, requests, json, os

## способ использования:
```
py tool.py --name=<username> --type=<put/get> --src_path=<src_path> --dst_path=<dst_path>
```

где
- name -> ваш логин на Dropbox
- type -> тип операции, put либо get
- src_path -> путь, откуда берется файл
- dst_path -> путь куда идет файл

если путь предпологается для локального файла то он может быь как относительный так и полный
если путь предпологается для удаленного файла то он должен начинаться с /

## например:
```
py tool.py --name=valerian --type=get --src_path=/train.png --dst_path=downloaded/
py tool.py --name=valerian --type=put --src_path=downloaded/train.png --dst_path=/train_upload.png
```

## особенности:
Из за изменения политики API у Dropbox нет возможности напрямую через пару логин/пароль веси чтение файлов или их отправку

Единственным способом получения доступа является Oauth2, посредством генерации токенов в несколько этапов, один из которых является копирование сгенерируемой ссылки и выдача разрешений о аккаунта. Дополнительной проблемой является то что токены не долговечны и держатся 4 часа,
но в течении этого времени можно свободно пользоваться загрузкой и скачиванием, таким образом данный скрипт подойдет для использования одним человеком, либо несколькими, но предварительно для каждого из них получить токены. Так же из за ограничения в 1 бесплатный аккаунт я не смог более подробно
проверить информацию по генерации токена сразу на команду, который бы имел доступ к работе с файлами у каждого его члена.

## Пошаговая инструкция:
1. необходимо скачать данный репозиторий
2. необходимо установить Python 3.8 если он был до этого не установлен
3. необходимо запустить tool.py через интерпритатор python где в качестве параметров указать логин, тип действия, исходный путь до файла, конечный путь до файла (пример представлен выше)
4. Если не закеширована информация об App то необходимо вставить переданные значения App key и App secret 
либо необходимо создать свой App в системе Dropbox (https://www.dropbox.com/developers/apps), и скопировать оттуда App key и App secret
5. Если не закеширована информация о токене то будет сгенерирована ссылка рядом с текстом "Go to the following URL and allow access" по которой надо будет перейти, предоставить доступы к приложению и перенести текст со страницы обратно в консоль (токен закешируется в соответствии с логином из параметров к скрипту)
6. файл будет соответственно либо скачен либо загружен
7. работа с ошибками:
  - cant create token
    - не удалось получить токен из за того что введенный код не существует или истек его срок годности
  - local file not exists
    - проверьте имя файла, что бы он существовал
  - cant find cloud file
    - проверьте путь к облачному файлу, что бы он существовал
  - cant process type
    - неправильно был введен type